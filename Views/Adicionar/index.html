<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spotify do Vini - Gerenciar Música e Artista</title>
  <link rel="stylesheet" href="./Style/style.css" />
  <link rel="icon" href="data:," />
</head>

<body>
  <header class="site-header">
    <div class="logo">
      <h1>Spotify do Vini</h1>
    </div>
    <nav class="social-icons">
      <a href="https://www.instagram.com" target="_blank" rel="noopener">
        <img src="https://cdn-icons-png.flaticon.com/512/174/174855.png" alt="Instagram" />
      </a>
      <a href="https://wa.me/55" target="_blank" rel="noopener">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp" />
      </a>
      <a href="https://www.facebook.com" target="_blank" rel="noopener">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook" />
      </a>
    </nav>
  </header>

  <main class="container-horizontal">
    <!-- Formulário para adicionar música -->
    <section class="coluna">
      <h2>Adicionar Música</h2>
      <form id="formAdicionarMusica">
        <input type="text" id="musicaTitulo" name="titulo" placeholder="Título da Música" required />

        <input type="text" id="musicaArtista" name="artista" placeholder="Nome do Artista" required />

        <input type="text" id="musicaGenero" name="genero" placeholder="Gênero" required />

        <input type="number" id="musicaDuracao" name="duracao" placeholder="Duração (segundos)" min="1" required />

        <div class="input-file-container">
          <input type="file" id="musicaArquivo" name="arquivo" accept="audio/*" required />
          <label for="musicaArquivo">Escolher arquivo da música</label>
          <span class="file-name">Nenhum arquivo selecionado</span>
        </div>

        <div class="input-file-container">
          <input type="file" id="musicaCapa" name="capa" accept="image/*" />
          <label for="musicaCapa">Escolher capa do álbum</label>
          <span class="file-name">Nenhum arquivo selecionado</span>
        </div>

        <button type="submit">Enviar Música</button>
      </form>
    </section>

    <!-- Formulário para adicionar artista -->
    <section class="coluna">
      <h2>Adicionar Artista</h2>
      <form id="formAdicionarArtista">
        <input type="text" id="artistaNome" name="nome" placeholder="Nome do Artista" required />

        <div class="input-file-container">
          <input type="file" id="artistaFoto" name="foto" accept="image/*" />
          <label for="artistaFoto">Escolher foto do artista</label>
          <span class="file-name">Nenhum arquivo selecionado</span>
        </div>

        <button type="submit">Enviar Artista</button>
      </form>
    </section>
  </main>

  <!-- Lista de músicas com busca -->
  <section class="coluna" style="margin: 20px;">
    <h2>Lista de Músicas</h2>
    <input type="search" id="buscaMusicas" placeholder="Buscar músicas..." aria-label="Buscar músicas"
      style="width: 100%; padding: 8px; margin-bottom: 15px;" />
    <ul id="musicaList"></ul>
  </section>

  <!-- Modal de edição (sem estilo embutido, para você adicionar) -->
  <div id="editModal" style="display:none;">
    <h2>Editar Música</h2>
    <input type="text" id="editTitulo" placeholder="Novo Título" required />
    <input type="text" id="editArtista" placeholder="Novo Artista" required />
    <input type="text" id="editGenero" placeholder="Novo Gênero" required />
    <input type="number" id="editDuracao" placeholder="Nova Duração (segundos)" required />
    <div class="modal-buttons">
      <button id="salvarEdicao">Salvar</button>
      <button id="cancelarEdicao">Cancelar</button>
    </div>
  </div>

  <script src="./js/upload.js"></script>

  <script>
    // Atualiza o nome dos arquivos selecionados nos inputs file
    document.querySelectorAll('.input-file-container input[type="file"]').forEach(input => {
      input.addEventListener('change', () => {
        const fileName = input.files.length ? input.files[0].name : 'Nenhum arquivo selecionado';
        input.nextElementSibling.nextElementSibling.textContent = fileName;
      });
    });

    // Busca para filtrar músicas na lista
    const buscaInput = document.getElementById('buscaMusicas');
    const listaMusicas = document.getElementById('musicaList');

    buscaInput.addEventListener('input', () => {
      const filtro = buscaInput.value.toLowerCase();
      const itens = listaMusicas.querySelectorAll('li');
      itens.forEach(item => {
        const titulo = item.querySelector('.titulo')?.textContent.toLowerCase() || '';
        const artista = item.querySelector('.artista')?.textContent.toLowerCase() || '';
        if (titulo.includes(filtro) || artista.includes(filtro)) {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
    });
  </script>
</body>

</html>